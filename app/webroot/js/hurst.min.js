/*! hurst 02-06-2014 */
$(function(){var a=$("#erroruid"),b=$("#forgotuid"),c=$("#forgotsubmit"),d="alert-box warning";b.on("blur",function(){b.val().length&&$.ajax({type:"get",dataType:"json",url:"/users/check/"+b.val(),beforeSend:function(){a.addClass(d).html(' Checking <img src="/img/ajax-loader.gif" alt="ajax" />')},success:function(b){0==b?(a.addClass(d).html("Can't find that username"),c.attr("disabled","disabled")):(a.removeClass(d).empty(),c.removeAttr("disabled"))}})}).on("focus",function(){a.removeClass(d).empty()})}),$(function(){var a=$("#goals input[name*=time]");a.on("focus input",function(){var a=$(this).parent().next().find("input");45==$(this).val()||90==$(this).val()?a.attr("disabled",null):a.attr("disabled","disabled")}),$("#EditGoal").on("submit",function(){})}),$(function(){var a=$("#EditGoals #result");a.on("input",function(){var b=/\b\d{1,2}-\d{1,2}\b/;if(a.val().match(b)){goals=a.val().split("-");var c=goals[0],d=goals[1];c==d&&a.data("mid")>48?$("#resolution").show("slow"):$("#resolution").hide();for(var e=$("#teama .scoreLine"),f=$("#teamb .scoreLine"),g=$("#teama").data("tid"),h=$("#teamb").data("tid"),i=e.size(),j=f.size();i>c;)$("#teama .scoreLine:eq("+--i+")").remove();for(;j>d;)$("#teamb .scoreLine:eq("+--j+")").remove();var k='<div class="scoreLine"> ';k+='<input required placeholder="scorer" name="data[Goal][*][scorer]" type="text"> ',k+='<input class="time normal" name="data[Goal][*][time]" type="number" min="1" max="120">+ ',k+='<input class="time" disabled name="data[Goal][*][tao]" type="number" min="0" /> ',k+='<input type="hidden" name="data[Goal][*][team_id]" value="#">',k+='<select name="data[Goal][*][type]">',k+='<option value=""></option>',k+='<option value="P">Pen</option>',k+='<option value="O">OG</option>',k+="</select>",k+="</div>";for(var l=0;c-i>l;l++){var m=k.replace(/\*/g,l+i).replace(/#/g,g);$("#teama").append(m)}for(var n=0;d-j>n;n++){var m=k.replace(/\*/g,n+j+100).replace(/#/g,h);$("#teamb").append(m)}}}),$("#EditGoals").on("focus input",".normal",null,function(){var a=parseInt($(this).val()),b=$(this).next();-1==[45,90,120].indexOf(a)?b.attr("disabled","disabled"):b.attr("disabled",null)}),$("#EditGoals").on("submit",function(){})}),$(function(){var a=$("#matchlists"),b=$("#teamlists");$("#showml").on("click",function(){b.hide(),"none"==a.css("display")?a.show():a.hide()}),$("#showtl").on("click",function(){a.hide(),"none"==b.css("display")?b.show():b.hide()})}),$(function(){$("#predIndexForm :text").on("change",function(){var a=$(this),b=a.closest("td");$.ajax({dataType:"json",type:"POST",async:!1,data:{mid:a.data("mid"),pid:a.data("pid"),pred:a.val()},url:"/predictions/update",beforeSend:function(){b.removeClass("ajaxChange")},success:function(c){c&&(b.addClass("ajaxChange"),a.data("pid",c))}})}).on("blur",function(){var a=/\b\d{1,2}-\d{1,2}\b/;$(this).val().match(a)||""==$(this).val()?$(this).removeClass("score_val_error"):$(this).addClass("score_val_error")}),$("#predIndexForm :radio").on("click",function(){var a=':radio[name="'+$(this).attr("name")+'"]',b=[],c=$(this).closest("td");$(a).each(function(){$(this).attr("disabled")||b.push($(this).prev().data("pid"))}),$.ajax({type:"POST",dataType:"JSON",url:"/predictions/updatej",data:{sel:$(this).prev().data("pid"),pids:b},beforeSend:function(){},success:function(){c.addClass("ajaxChange")}})})}),$(function(){var a=($("#OptionsPwd"),$("#OptionsNew")),b=$("#OptionsRpt"),c=0;a.on("blur",function(){a.val().length<6&&a.val().length>0?(a.next().html("Password must be greater than 5 characters"),c=1):c=0}).on("focus",function(){a.next().empty()}),b.on("blur",function(){b.val().length&&b.val()!=a.val()?(b.next().html("Passwords don't match"),c=1):c=0}).on("focus",function(){b.next().empty()}),$("#UserOptions").on("submit",function(a){c&&a.preventDefault()})}),$(function(){$("#payments button").on("click",function(){var a=$(this).data("uid"),b=$(this).parent();$.ajax({type:"post",url:"/users/payment",data:{id:a},dataType:"json",beforeSend:function(){b.removeClass("error").html('<img src="/img/ajax-loader.gif" />')},statusCode:{404:function(){b.html('<span class="error">Couldn\'t contact server</span>')},500:function(){b.html('<span class="error">Server returned an error.</span>')}},success:function(a){a.success===!0?b.html("&#x2714;").removeClass("error"):b.html(a.msg).addClass("error")}})})}),$(function(){var a=$("#verifyuid"),b=$("#verifypwd"),c=$("#verifyrpt"),d=$("#uid_err"),e=$("#pwd_err"),f=$("#rpt_err"),g=0;a.on("blur",function(){a.val().length&&$.ajax({type:"GET",url:"/users/check/"+a.val(),dataType:"json",beforeSend:function(){d.addClass("error").html(' Checking <img src="/img/ajax-loader.gif" alt="ajax" />')},success:function(a){a?(d.addClass("error").html(" That username is already in use"),g=1):(d.removeClass("error").html("&nbsp;"),g=0)}})}),b.on("blur",function(){b.val().length<5&&e.addClass("error").html(" Password must contain more than five characters")}).on("focus",function(){e.removeClass("error").html("&nbsp;")}),c.on("blur",function(){c.val()!=b.val()&&f.addClass("error").html(" Passwords don't match")}).on("focus",function(){f.removeClass("error").html("&nbsp;")}),$("#Verify").on("submit",function(){var a=!1;return a=1==g||""==b.val()||""==c.val()||b.val().length<5||b.val()!=c.val(),!a})});